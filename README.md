# ASP.Net Core Web API Server 학습
- 닷넷에서 API Server용 게임서버 개발을 위해 학습을 하기 위한 것이다.
- [ASP.NET Core 7.0의 새로운 기능](https://learn.microsoft.com/ko-kr/aspnet/core/release-notes/aspnetcore-7.0?view=aspnetcore-7.0  )  
- [Announcing ASP.NET Core in .NET 7](https://devblogs.microsoft.com/dotnet/announcing-asp-net-core-in-dotnet-7/  )  
- [C# 비동기 프로그래밍 정리](https://docs.google.com/document/d/e/2PACX-1vRHRbQjeoJH9lXalTClFBuB-D41v9TaBTPc_TeUS-yKhPZTJa2dWjpv_Rib863b_disjspqymOjgKwq/pub )
      
    
<br>     

## 1. 학습하기 
**직접 예제 코드를 만들어 보면서 학습을 잘하자**    
  
### Redis 프로그래밍
- [Redis의 기본 데이터 유형 및 명령](https://docs.google.com/document/d/10mHFq-kTpGBk1-id5Z-zoseiLnTKr_T8N3byBZP5mEg/edit?usp=sharing )
- [(영상) Redis 야무지게 사용하기](https://forward.nhn.com/2021/sessions/16 )
- [Redis 기능 학습하기](http://redisgate.kr/redis/introduction/redis_intro.php )
- C# Redis 프로그래밍 학습
    - [CloudStructures - Redis 라이브러리 - jacking75](https://jacking75.github.io/NET_lib_CloudStructures/ )
    - [CloudStructures를 이용한 C# Redis 프로그래밍](https://gist.github.com/jacking75/5f91f8cf975e0bf778508acdf79499c0 ) 
  
  
### MySQL 프로그래밍
- [MySqlConnector 간단 정리](https://gist.github.com/jacking75/51a1c96f4efa1b7a27030a7410f39bc6 ) 
- [프로그래밍 라이브러리는 SalKata 소개](https://docs.google.com/document/d/e/2PACX-1vTnRYJOXyOagNhTdhpkI_xOQX4DlMu0TRcC9Ehew6wraufgEtBuQiSdGpKzaEmRb-jfsLv43i0nBQsp/pub )
    - [예제 프로그램: github_sqlkata_demo.zip](https://drive.google.com/file/d/1FBpB1zQ84LqGOA9WAJ6vk5S3453ekqDc/view?usp=sharing )
  
  
### 2022년 인턴 사원이 만든 학습 자료
`학습자료_2022년_인턴` 이라는 디렉토리에 2022년 인턴 사원으로 근무한 분이 만든 학습 자료가 있다.    
이 자료들을 순서대로 한번 보기 바란다.  
이것들을 본 후 실습을 하나씩 한다. 
`03_Dapper`, `06연습 프로젝트 구현`은 따라서 실습을 할 필요는 없다.  그냥 보기만 한다.    
   
학습에서는 데이터 베이스 프로그래밍으로 `Dapper`를 사용하고 있는데 실제 실습에서는 `SqlKata`를 사용한다  
[SqlKata 소개](https://docs.google.com/document/d/e/2PACX-1vTnRYJOXyOagNhTdhpkI_xOQX4DlMu0TRcC9Ehew6wraufgEtBuQiSdGpKzaEmRb-jfsLv43i0nBQsp/pub  )    
[demo 프로그램](./codes/github_sqlkata_demo.zip)  `codes` 디렉토리에 있는 `github_sqlkata_demo.zip` 파일이다.     
  
      
### 서버 캠퍼스 1기 수료생 정리 자료
- https://sueshin.tistory.com/category/%EA%B0%9C%EC%9D%B8%EA%B3%B5%EB%B6%80/Web%20API%20%EA%B2%8C%EC%9E%84%20%EC%84%9C%EB%B2%84%20%EA%B3%B5%EB%B6%80
- https://gist.github.com/jacking75/344fd3c8c16fc27fe51d4c983a3a6306
- https://paper-tub-6ae.notion.site/0be4168f7f224f82a89110423e3943cb
- [ASP.NET Core로 Web API 만들기](https://babebab.tistory.com/53 )
- [워리할수있다 (tistory.com)](https://wallyyoucandoit.tistory.com/?page=1)
- [Intro - WebAPI Server (gitbook.io)](https://dong-d.gitbook.io/webapi-server/)
- [ASP (notion.site)](https://easy-cell-518.notion.site/ASP-0f310b9157de4cb683a5250c5eb9cc19 )
- https://velog.io/@oak_cassia/%EC%84%9C%EB%B2%84%EC%BA%A0%ED%8D%BC%EC%8A%A4-1%EA%B8%B0-ASP.NET-Core
- https://beathe.at/2023-04/ASP.NET-Core-GameServer
    - [GitHub Com2usEduProject](https://github.com/beatheat/Com2usEduProject )
   
  
### 서버 캠퍼스 1기 수료생 정리 자료
`학습자료_2024_서버캠퍼스2기`  디렉토리를 보기 바란다  
   
  
  
### 문서 
- [Web서비스의 서버구성과목적](https://docs.google.com/presentation/d/105NPfv7CPfgk0Iw_6vSB_oOavQZpes7-Wit5HuCm7oM/edit?usp=sharing )
- [DAO, DTO, VO 란? 간단한 개념 정리](https://melonicedlatte.com/2021/07/24/231500.html )
- ASP.NET Core Web 
    - [시작](https://blog.naver.com/sssang97/223088811266 ) 
	- [컨트롤러와 route 규칙](https://blog.naver.com/sssang97/223088978577 ) 
	- [Request 처리](https://blog.naver.com/sssang97/223089025576 ) 
	- [Response 처리](https://blog.naver.com/sssang97/223089045407 )
- [ASP.NET Core 입문 – 미들웨어와 파이프라인 해설](https://docs.google.com/document/d/e/2PACX-1vRsqcyeBi--VYCPwQlhW9LsAyYUKSuuh80_BiSgnNnrfULsZFgz3i_Bj8nGG6dl-Q6NEiKBjhGx2bJ6/pub )	
- [ASP.NET Core의 속도 제한 미들웨어](https://learn.microsoft.com/ko-kr/aspnet/core/performance/rate-limit?preserve-view=true&view=aspnetcore-7.0  )
- [요청 본문을 Stream 또는 PipeReader로 바인딩](https://learn.microsoft.com/ko-kr/aspnet/core/fundamentals/minimal-apis?view=aspnetcore-7.0#rbs ) 
- [STREAM](https://learn.microsoft.com/ko-kr/aspnet/core/fundamentals/minimal-apis?preserve-view=true&view=aspnetcore-7.0#stream7  )
- [ASP.NET Core 출력 캐싱 미들웨어](https://learn.microsoft.com/ko-kr/aspnet/core/performance/caching/output?view=aspnetcore-7.0  ) 
- 외부 자료: 
    - [모바일 게임 개발 개요](https://drive.google.com/file/d/1WImt5yn7cpIBm2opZFWMapWW2GX6XB_R/view?usp=sharing ) 
	- [게임 엔진 아웃라인](https://drive.google.com/file/d/1HeBu2NXeLXU8VY5l7Gph4l6SRZkhZQae/view?usp=sharing ) 
	- [데이터 설계](https://drive.google.com/file/d/14NcczPD6XS1rLH6TpORCcLhF9ftsVSgu/view?usp=sharing ) 
	- [통신](https://drive.google.com/file/d/1VmxaTRA1qJnoIGWKK6SoYDH-pHBvnGbz/view?usp=sharing )
    

<br>   
<br>      
   
## 2. 실습
아래 프로그램은 `codes` 디렉토리의 `basic` 디렉토리 안에 있다.  
     
### basic_01  
ASP.NET Core Web API 기본 템플릿으로 만든 프로그램이다   
Get 메소드로 `http://localhost:5000/WeatherForecast`를 호출하면 Json 데이터를 받을 수 있다.
  
<br>   
  
### basic_02
보통 API 서버에 요청을 할 때 Post 메소드로 Json 포맷으로 요청하고, Josn 포맷으로 응답을 받는다.
로그인 요청을 가정한 아주 간단한 컨트룰러를 하나 만들어서 이 동작을 시연한다.  
  
실제 API 서버를 운용할 때는 앞단에 로드밸런스를 두고, 여기서 HTTPS 처리를 하게 하면 되므로 HTTP 프로토콜은 사용하지 않도록 하였다.   
  
요청은 아래와 같다.  
```
POST http://localhost:11500/Login
Content-Type: application/json

{
  "ID":"jacking",
  "PW":"dsd"
}
```    
    
<br>   

### basic_03  
MySQL과 Redis를 사용하여 계정 생성과 로그인 처리를 한다.   
라이브러리: MySQL(Sqlkata), Redis(CloudStructures)  
   
DataBase 이름은 `account_db`, 테이블 이름은 `account`  이다.    
```sql
CREATE TABLE IF NOT EXISTS account_db.`account`
(
    AccountId BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY COMMENT '계정번호',
    Email VARCHAR(50) NOT NULL UNIQUE COMMENT '이메일',
    SaltValue VARCHAR(100) NOT NULL COMMENT  '암호화 값',
    HashedPassword VARCHAR(100) NOT NULL COMMENT '해싱된 비밀번호',
    CreatedAt DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '생성 날짜'
) COM    
```  
  
아래는 요청  
```  
POST http://localhost:11500/Login
Content-Type: application/json

{
  "Email":"heungbae01@nasdfsfdver.com",
  "Password":"123qwe"
}
```
  
<br>  

### basic_04  
`basic_03`과 동일하지만 **로거**가 추가되었다.  
ASP.NET Core에서 제공하는 로거를 설정해서 사용한다.  
여기에서는 콘솔 출력만 하고 있다.  
  

<br>    
  
### basic_05  
`basic_04`과 동일하지만 **로거를 표준에서 ZLogger**로 변경하였다.    
`ZLogger`를 오픈소스 라이브러리로 표준 로거 보다 더 고성능이다.  
조금의 코드 변경으로 표준에서 ZLogger로 변경이 가능하다.  
   

<br>  

### basic_06    
미들웨어를 사용하고 있다.  
이번 프로젝트는 구현을 다 하지 않고, 미들웨어를 사용하는 방법만 코드로 보여주고 있다.  
이 샘플만으로는 미들웨어의 장점에 대해서 잘 이해시키기 힘들다.  
설명이 필요하다.    

<br>   
  
### basic_07    
DI를 사용한다  
  

<br>  
<br>  
   

## API Server  
- 게임 서버를 개발할 때 사용할 기본 템플릿  
- 아래 프로그램은 `codes` 디렉토리의 `net7` 디렉토리 안에 있다.  
    - 만약 닷넷 8 혹은 9가 나오면 거의 동일한 코드가 있는 `net8`, `net9` 디렉토리가 있을 것이다  

  
<br>  
    
## example_filter_APIServer
- 아래 프로그램은 `codes` 디렉토리 안에 있다.  
- 기획데이터(마스터 데이터)가 json으로 된 것을 로딩
- 미들웨어로 라우팅을 커스텀마이징
- 미들웨어로 클라이언트 보낸 요청 데이터의 암호를 풀어서 핸들러에 전달하도록 한다
- 필터로 클라이언트에 보내는 응답의 포맷을 변환하거나 암호화 하도록 한다  
  
<br>   
  
## gRPC Server    
- 아래 프로그램은 `codes` 디렉토리 안에 있다.  
- 아래 기능을 사용하여 JSON을 주고 받을 수 있도록 한다. 아직 클라이언트에서 gRPC 통신을 쉽게 할 수 없는 경우가 많다.  
- MS Docs 
    - [ASP.NET Core gRPC 앱에서 gRPC JSON 코드 변환](https://learn.microsoft.com/ko-kr/aspnet/core/grpc/json-transcoding?view=aspnetcore-7.0 )
    - [gRPC JSON 코드 변환에 대한 HTTP 및 JSON 구성](https://learn.microsoft.com/ko-kr/aspnet/core/grpc/json-transcoding-binding?view=aspnetcore-7.0 )
	  - [.NET 앱에 대한 Protobuf 메시지 만들기](https://learn.microsoft.com/ko-kr/aspnet/core/grpc/protobuf?view=aspnetcore-7.0)
	  - [.NET용 gRPC 구성](https://learn.microsoft.com/ko-kr/aspnet/core/grpc/configuration?view=aspnetcore-7.0 )
	  - [.NET의 gRPC에서 로깅 및 진단](https://learn.microsoft.com/ko-kr/aspnet/core/grpc/diagnostics?view=aspnetcore-7.0 )
	  - [gRPC와 프로세스 간 통신](https://learn.microsoft.com/ko-kr/aspnet/core/grpc/interprocess?view=aspnetcore-7.0 )
- [샘플코드 Transcoder](https://github.com/grpc/grpc-dotnet/tree/master/examples/Transcoder)  
- [ASP.NET Core gRPC 앱에서 gRPC JSON 코드 변환 프로젝트 만들기](https://docs.google.com/document/d/e/2PACX-1vTQCG9IMA32WOgCFO417LqwS0KxrPK_AiijaR9tuz3a0lboL9C4TuHiOw-y9WZ0LtfIq1Wn2qxHvkZE/pub)    
  
   
<br>   
     
## 참고할 실습 프로젝트 
- 2022년 신입 사원 교육 프로젝트
    - `codes/robotmon-go` 디렉토리에 있다.  
	- `.NET 6` 버전 사용  
- 2023년 지니어스 인턴 프로젝트 
    - https://github.com/jacking75/com2us_edu_GenieFarm
    
    
<br>   
<br>   
  
  
## C# 학습 자료
- 학습에는 LinqPad라는 툴을 사용하면 편리하다
    - [2019-03_LinqPad](https://docs.google.com/presentation/d/1THcgeub4cNRJdFCxHatpxkPR0AhYJay55P5xxZ1sgtE/edit?usp=sharing )
    - [LinqPad 무료 버전에서 nuget을 사용하고 싶을 때](https://docs.google.com/document/d/1Hn8WDZxkX5os86DZANeHS4ggeqq6NWD67QbfigawJuM/edit?usp=sharing ) 
- 빠르게 핵심 위주로 배우고 싶다면 예제로 배우는 C# 프로그래밍 사이트의 글을 본다. 
    - [문법](http://www.csharpstudy.com/CSharp/CSharp-intro.aspx )
    - [6.0 버전 이후의 새 기능](http://www.csharpstudy.com/Latest/CS-new-features.aspx )
    - [자료구조](http://www.csharpstudy.com/DS/array.aspx )
    - [멀티쓰레딩](http://www.csharpstudy.com/Threads/thread.aspx )
- [(인프런 무료 영상) C# 초보 강좌 예제로 배우는 C# - 11 강 ∙ 8시간 17분](https://inf.run/PVsq)
- [(인프런 무료 영상) C# 처음부터 배우기 - 커리큘럼 총 11 개 ˙ 3시간 53분의 수업](https://inf.run/bfkW)
- [(인프런 무료 영상) C# 프로그래밍 - 커리큘럼 총 63 개 ˙ 29시간 56분의 수업](https://inf.run/PueZ)
- [YOUTUBE 닷넷데브](https://www.youtube.com/c/%EB%8B%B7%EB%84%B7%EB%8D%B0%EB%B8%8C/videos )
